(window["webpackJsonpjira-kpi-dashboard"]=window["webpackJsonpjira-kpi-dashboard"]||[]).push([[2],{100:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(16),c=n.n(o),i=n(12),u=n(53),s=n(55),l=n(22),d=n(107),p=n(17),f=n(18),g=n(21),m=n(19),h=n(20),O=n(109),b=n(103),y=n(108),v=n(56),j=n.n(v),E=(n(71),n(33)),S=n(37),w=n(102),L=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.location!==e.location&&window.scrollTo(0,0)}},{key:"render",value:function(){return this.props.children}}]),t}(a.a.Component),A=Object(w.a)(L),T=n(24),D=function(e){function t(){return Object(p.a)(this,t),Object(g.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(f.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.alert,n=this.props.messages,r=n.error,a=n.message,o=e.messages.message,c=e.messages.error;a!==o&&t.success(a,{timeout:5e3,transition:T.b.SCALE}),r!==c&&r.msg&&t.error(r.msg)}},{key:"render",value:function(){return a.a.createElement(r.Fragment,null)}}]),t}(r.Component),C=Object(l.b)((function(e){return{messages:e.messages}}))(Object(T.c)()(D)),k=n(38),_=n(36),P=n.n(_),R=n(57),I=n.n(R),N=(n(98),n(99),n(40)),U=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(17)]).then(n.bind(null,520))})),x=j()({loader:function(){return Promise.all([n.e(0),n.e(4),n.e(13)]).then(n.bind(null,534))},loading:E.a}),G=function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(g.a)(this,Object(m.a)(t).call(this,e))).props.onTryAutoSignup(),n}return Object(h.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return this.props.auth.isLoadingUser?a.a.createElement("div",{className:"middle-page"},a.a.createElement(I.a,{forever:!0,duration:1500},a.a.createElement(N.a,{fontWeight:600,className:"f-60 px-1"})),a.a.createElement("h3",null," Chargement... ")):a.a.createElement(S.a,null,a.a.createElement(P.a,{big:!0},a.a.createElement(A,null,a.a.createElement(r.Suspense,{fallback:a.a.createElement(E.a,null)},a.a.createElement(C,null),a.a.createElement(O.a,null,a.a.createElement(b.a,{path:"/auth/signin",exact:!0,name:"connexion",render:function(){return a.a.createElement(P.a,null,a.a.createElement(U,null))}}),this.props.auth.isAuthenticated?a.a.createElement(b.a,{path:"/",component:x}):a.a.createElement(y.a,{to:"/auth/signin"}))))))}}]),t}(r.Component),B=Object(l.b)((function(e){return{auth:e.auth}}),(function(e){return{onTryAutoSignup:function(){return e(Object(k.a)())}}}))(G);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var F=n(8),M=n(58),W=n(13),z=n(2),Y=n(5),H={authError:null,isAuthenticated:!!localStorage.getItem("token"),isLoading:!1,isLoadingUser:!1,accessToken:localStorage.getItem("token")},J=function(e,t){var n=t.payload.accessToken;return localStorage.setItem("token",n),Object(Y.a)(e,{isAuthenticated:!0,isLoading:!1})},V=function(e,t){return Object(Y.a)(e,{isAuthenticated:!0,isLoadingUser:!1,user:t.payload})},q=function(e,t){return Object(Y.a)(e,Object(W.a)({},t,!0))},Q=function(e,t){return Object(Y.a)(e,Object(W.a)({},t,!1))},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.m:return J(e,t);case z.u:case z.l:case z.r:return q(e,"isLoading");case z.y:return q(e,"isLoadingUser");case z.w:return V(e,t);case z.v:case z.t:case z.k:case z.s:case z.q:return Q(e,"isLoading");case z.x:return Q(e,"isLoadingUser");case z.n:return console.log("signout success"),H;default:return e}},$=n(31);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(n,!0).forEach((function(t){Object(W.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ee=Z({isOpen:[],isTrigger:[]},F.a,{isFullScreen:!1}),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,t=arguments.length>1?arguments[1]:void 0,n=[],r=[];switch(t.type){case z.e:return Z({},e,{collapseMenu:!e.collapseMenu});case z.f:if("sub"===t.menu.type){r=e.isOpen;var a=(n=e.isTrigger).indexOf(t.menu.id);a>-1&&(r=r.filter((function(e){return e!==t.menu.id})),n=n.filter((function(e){return e!==t.menu.id}))),-1===a&&(r=[].concat(Object($.a)(r),[t.menu.id]),n=[].concat(Object($.a)(n),[t.menu.id]))}else{r=e.isOpen;var o=e.isTrigger.indexOf(t.menu.id);n=-1===o?[t.menu.id]:[],r=-1===o?[t.menu.id]:[]}return Z({},e,{isOpen:r,isTrigger:n});case z.p:return Z({},e,{isOpen:r,isTrigger:n});case z.o:if("sub"===t.menu.type){r=e.isOpen;var c=(n=e.isTrigger).indexOf(t.menu.id);return c>-1&&(r=r.filter((function(e){return e!==t.menu.id})),n=n.filter((function(e){return e!==t.menu.id}))),Z({},e,{isOpen:r,isTrigger:n})}return Z({},e);case z.h:return Z({},e,{isFullScreen:!e.isFullScreen});case z.i:return Z({},e,{isFullScreen:!1});case z.d:return Z({},e,{layout:t.layout});default:return e}},ne={category:{isLoading:!1,categories:void 0},projects:null},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.c:return Object(Y.a)(e,{category:{isLoading:!0}});case z.b:return Object(Y.a)(e,{category:{categories:t.payload,isLoading:!1}});default:return e}},ae={message:void 0,error:{msg:{},code:void 0}},oe=Object(i.combineReducers)({auth:X,ui:te,messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z.g:return Object(Y.a)(e,{message:t.message});case z.j:case z.a:return Object(Y.a)(e,{error:{msg:t.payload.message,code:t.payload.code}});default:return e}},project:re}),ce=Object(i.createStore)(oe,Object(u.composeWithDevTools)(Object(i.applyMiddleware)(s.a))),ie=a.a.createElement(l.a,{store:ce},a.a.createElement(d.a,{basename:F.a.basename},a.a.createElement(T.a,Object.assign({template:M.a},{position:"top center"}),a.a.createElement(B,null))));c.a.render(ie,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},11:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return c}));var r=n(2),a=function(e){return{type:r.g,message:e}},o=function(e){return{type:r.a,payload:e}},c=function(e){return{type:r.a,payload:e}}},2:function(e,t,n){"use strict";n.d(t,"e",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"h",(function(){return o})),n.d(t,"i",(function(){return c})),n.d(t,"d",(function(){return i})),n.d(t,"p",(function(){return u})),n.d(t,"o",(function(){return s})),n.d(t,"y",(function(){return l})),n.d(t,"w",(function(){return d})),n.d(t,"x",(function(){return p})),n.d(t,"l",(function(){return f})),n.d(t,"m",(function(){return g})),n.d(t,"k",(function(){return m})),n.d(t,"n",(function(){return h})),n.d(t,"v",(function(){return O})),n.d(t,"t",(function(){return b})),n.d(t,"u",(function(){return y})),n.d(t,"a",(function(){return v})),n.d(t,"q",(function(){return j})),n.d(t,"s",(function(){return E})),n.d(t,"r",(function(){return S})),n.d(t,"c",(function(){return w})),n.d(t,"b",(function(){return L})),n.d(t,"j",(function(){return A})),n.d(t,"g",(function(){return T}));var r="COLLAPSE_MENU",a="COLLAPSE_TOGGLE",o="FULL_SCREEN",c="FULL_SCREEN_EXIT",i="CHANGE_LAYOUT",u="NAV_CONTENT_LEAVE",s="NAV_COLLAPSE_LEAVE",l="USER_LOADING_START",d="USER_LOADED",p="USER_LOADING_FAIL",f="LOGIN_START",g="LOGIN_SUCCESS",m="LOGIN_FAIL",h="LOGOUT_SUCCESS",O="REGISTER_SUCCESS",b="REGISTER_FAIL",y="REGISTER_START",v="AUTH_ERROR",j="PASSWORD_CHANGE_FAILED",E="PASSWORD_CHANGE_SUCCESS",S="PASSWORD_CHANGE_START",w="CATEGORY_LOADING",L="CATEGORY_LOADED",A="GET_ERRORS",T="CREATE_MESSAGE"},25:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c}));var r=[{id:"navigation",title:"Navigation",type:"group",icon:"icon-navigation",children:[{id:"dashboard",title:"Dashboard",type:"item",url:"/dashboard",icon:"feather icon-home"}]},{id:"categorie",title:"CATEGORIE",type:"group",icon:"icon-ui",children:[{id:"plateaux",title:"Plateaux",type:"collapse",icon:"feather icon-briefcase",children:[{id:"uncategorized",title:"Non cat\xe9goris\xe9s",type:"item",url:"/projets/uncategorized"}]}]},{id:"parameter",title:"PARAMETRES",type:"group",icon:"icon-group",children:[{id:"update-db",title:"Mise \xe0 jour de la BD",type:"item",url:"/update-db",icon:"feather icon-refresh-cw"},{id:"account",title:"Gestion comptes",type:"collapse",icon:"feather icon-users",children:[{id:"pwdChange",title:"Mot de passe",type:"item",icon:"feather icon-lock",url:"/changer-de-mot-de-passe"}]}]}],a={items:JSON.parse(JSON.stringify(r))};function o(){a.items=JSON.parse(JSON.stringify(r))}function c(e,t){!function(e){e.forEach((function(e){var t={type:"item"};t.id=e.name.replace(/\s+/g,"-").toLowerCase(),t.title=e.name,t.url="/projets/category/"+e.id,a.items[1].children[0].children.push(t)}))}(e),function(e){var t=a.items[a.items.length-1].children[1].children;"admin"===e&&t.push({id:"addUser",title:"Ajout utilisateur",type:"item",icon:"feather icon-user-plus",url:"/ajout-utilisateur"})}(t)}t.a=a},33:function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(){return a.a.createElement("div",{className:"loader-bg"},a.a.createElement("div",{className:"loader-track"},a.a.createElement("div",{className:"loader-fill"})))}},37:function(e,t,n){"use strict";t.a=function(e){return e.children}},38:function(e,t,n){"use strict";n.d(t,"a",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"e",(function(){return O})),n.d(t,"b",(function(){return b}));var r=n(14),a=n.n(r),o=n(2),c=n(8),i=n(5),u=n(11),s=n(25),l=n(51),d=function(e){return function(t){setTimeout((function(){t(h())}),1e3*e)}},p=function(){return function(e){if(localStorage.getItem("token")){var t=new Date(localStorage.getItem("expirationDate"));t<=new Date?e(h()):(e(d((t.getTime()-(new Date).getTime())/1e3)),e(m()))}else e(h())}},f=function(e,t,n){return function(r){r({type:o.l});var i={username:e,password:t};a.a.post(c.a.apiBaseUrl+"/api/auth/signin",i,{headers:{"Content-Type":"application/json"}}).then((function(e){if(n){var t=new Date((new Date).getTime()+864e5);localStorage.setItem("expirationDate",t),r(d(86400))}else{var a=new Date((new Date).getTime()+108e5);localStorage.setItem("expirationDate",a),r(d(10800))}r(m(e.data.accessToken)),r(function(e){return{type:o.m,payload:e.data}}(e))})).catch((function(e){console.log("login error",e),r(Object(u.c)({message:"username ou mot de passe incorrect"})),r({type:o.k})}))}},g=function(e){return{type:o.w,payload:e.data}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return function(t,n){t({type:o.y}),a.a.get("".concat(c.a.apiBaseUrl,"/api/user/current"),Object(i.d)(e)).then((function(e){t(g(e)),t(Object(l.a)())})).catch((function(e){t(Object(u.a)(e)),t({type:o.x}),t(h())}))}},h=function(){return function(e,t){Object(s.b)(),localStorage.removeItem("token"),localStorage.removeItem("expirationDate"),e({type:o.n})}},O=function(e){var t=e.username,n=e.password,r=e.email;return function(e){e({type:o.u}),a.a.post(c.a.apiBaseUrl+"/api/auth/signup",{username:t,password:n,name:r},Object(i.d)()).then((function(t){e(function(e){return console.log("register payload",e),{type:o.v,payload:e.data}}(t)),e(Object(u.b)("Utilisateur cr\xe9\xe9 avec succ\xe8s"))})).catch((function(t){console.log(t),e({type:o.t}),e(Object(u.c)({message:"Utilisateur d\xe9j\xe0 existant ou mot de passe trop court(<6) "}))}))}},b=function(e){return function(t,n){t({type:o.r}),a.a.post("".concat(c.a.apiBaseUrl,"/api/auth/updatePassword?password=").concat(e.newPassword1,"&oldpassword=").concat(e.oldPassword),null,Object(i.d)()).then((function(e){t(Object(u.b)("Mot de passe chang\xe9 avec Success")),t({type:o.s})})).catch((function(e){console.log("err.data",e.data),console.log("err.dataded",e),console.log("err.dataded",e.message),t(Object(u.a)(e)),t({type:o.q})}))}}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r);function o(e){return a.a.createElement("div",{className:"text-center text-warning "},a.a.createElement("span",{className:e.className,style:{backgroundColor:"black",fontWeight:e.fontWeight}}," DIF"))}},5:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return i}));var r=n(13);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=function(e){return e.format("YYYY-MM-DD")},c=function(e){var t="";return e.page&&e.pageSize&&(t+="?page=".concat(e.page,"&size=").concat(e.pageSize)),e.sortField&&(t+="&sort=".concat(e.sortField,",").concat("descend"===e.sortOrder?"desc":"asc")),e.state&&0!==e.state.length&&(t+="&state=".concat(e.state[0])),e.startDate&&e.endDate&&(t+=""!==t?"&":"?",t+="startPeriod=".concat(o(e.startDate),"&endPeriod=").concat(o(e.endDate)),console.log("theQuery",t)),t},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=localStorage.getItem("token");e&&(t=e);var n={headers:{"Content-Type":"application/json"}};return t&&(n.headers.Authorization="Bearer ".concat(t)),n};t.a=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(n,!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)}},51:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(2),a=n(14),o=n.n(a),c=n(8),i=n(11),u=n(5),s=n(25),l=function(){return function(e,t){e({type:r.c}),o.a.get(c.a.apiBaseUrl+"/category",Object(u.d)()).then((function(n){e({type:r.b,payload:n.data}),Object(s.c)(n.data,t().auth.user.username)})).catch((function(t){console.error(t),e(Object(i.c)(t))}))}}},62:function(e,t,n){e.exports=n(100)},8:function(e,t,n){"use strict";t.a={defaultPath:"/page-introuvable",basename:"/jira-kpi",layout:"vertical",preLayout:null,collapseMenu:!1,layoutType:"menu-light",navIconColor:!1,headerBackColor:"header-default",navBackColor:"navbar-default",navBrandColor:"brand-default",navBackImage:!1,rtlLayout:!1,navFixedLayout:!0,headerFixedLayout:!1,boxLayout:!1,navDropdownIcon:"style1",navListIcon:"style1",navActiveListColor:"active-default",navListTitleColor:"title-default",navListTitleHide:!1,configBlock:!1,layout6Background:"linear-gradient(to right, #A445B2 0%, #D41872 52%, #FF0066 100%)",layout6BackSize:"",apiBaseUrl:Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_BASE_URL||"http://localhost:9090",accessToken:"accessToken"}},98:function(e,t,n){},99:function(e,t,n){}},[[62,3,5]]]);
//# sourceMappingURL=main.d507ebac.chunk.js.map
{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport * as actionTypes from \"../actions\";\nimport updateObject from '../../App/utilitity';\nvar initState = {\n  authError: null,\n  //AUTH\n  isAuthenticated: localStorage.getItem(\"token\") ? true : false,\n  isLoading: false,\n  isLoadingUser: false,\n  accessToken: localStorage.getItem(\"token\") // user: null\n\n};\n/*\n// FUNCTIOND FOR AUTH REDUCER\nconst loading = (state, action) => {\n  return updateObject(state, {\n    isLoading: true\n  });\n}\n\nconst userLoaded = (state, action) => {\n  return updateObject(state, {\n    isAuthenticated: true,\n    isLoading: false,\n    user: action.payload\n  });\n}\n\n*/\n\nvar authSuccess = function authSuccess(state, action) {\n  //  localStorage.setItem(\"id\", action.payload.user.id); // save user's id\n  var accessToken = action.payload.accessToken;\n  localStorage.setItem(\"token\", accessToken);\n  return updateObject(state, {\n    // user,\n    //accessToken,\n    isAuthenticated: true,\n    isLoading: false\n  });\n}; //HANDLING USER LOADING\n\n\nvar userLoaded = function userLoaded(state, action) {\n  return updateObject(state, {\n    isAuthenticated: true,\n    isLoadingUser: false,\n    user: action.payload\n  });\n};\n\nvar loading = function loading(state, name) {\n  return updateObject(state, _defineProperty({}, name, true));\n};\n\nvar loadingFinished = function loadingFinished(state, name) {\n  return updateObject(state, _defineProperty({}, name, false));\n};\n\nvar authReducer = function authReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actionTypes.LOGIN_SUCCESS:\n      return authSuccess(state, action);\n    //HANDLING  LOADING START\n\n    case actionTypes.REGISTER_START:\n    case actionTypes.LOGIN_START:\n    case actionTypes.PASSWORD_CHANGE_START:\n      return loading(state, 'isLoading');\n\n    case actionTypes.USER_LOADING_START:\n      return loading(state, 'isLoadingUser');\n\n    case actionTypes.USER_LOADED:\n      return userLoaded(state, action);\n    // HADLING LOADING STOP\n\n    case actionTypes.REGISTER_SUCCESS:\n    case actionTypes.REGISTER_FAIL:\n    case actionTypes.LOGIN_FAIL:\n    case actionTypes.PASSWORD_CHANGE_SUCCESS:\n    case actionTypes.PASSWORD_CHANGE_FAILED:\n      return loadingFinished(state, 'isLoading');\n\n    case actionTypes.USER_LOADING_FAIL:\n      return loadingFinished(state, 'isLoadingUser');\n    //LOGOUT  \n\n    case actionTypes.LOGOUT_SUCCESS:\n      console.log('signout success');\n      return initState;\n    // // -----------AUTH---------------//\n    // case actionTypes.USER_LOADED:\n    //   return userLoaded(state, action);\n    // case actionTypes.LOGIN_SUCCESS:\n    //   return authSuccess(state, action);\n    // case actionTypes.LOGIN_FAIL:\n    // case actionTypes.LOGOUT_SUCCESS:\n    //   return authFail(state, action);\n\n    default:\n      return state;\n  }\n};\n\nexport default authReducer;","map":{"version":3,"sources":["C:\\Users\\a851272\\OneDrive - Atos\\Bureau\\KPI-Jira-Front-End-master\\src\\store\\reducers\\authReducer.js"],"names":["actionTypes","updateObject","initState","authError","isAuthenticated","localStorage","getItem","isLoading","isLoadingUser","accessToken","authSuccess","state","action","payload","setItem","userLoaded","user","loading","name","loadingFinished","authReducer","type","LOGIN_SUCCESS","REGISTER_START","LOGIN_START","PASSWORD_CHANGE_START","USER_LOADING_START","USER_LOADED","REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_FAIL","PASSWORD_CHANGE_SUCCESS","PASSWORD_CHANGE_FAILED","USER_LOADING_FAIL","LOGOUT_SUCCESS","console","log"],"mappings":"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","sourcesContent":["import * as actionTypes from \"../actions\";\nimport updateObject from '../../App/utilitity';\n\nconst initState = {\n  authError: null,\n  //AUTH\n  isAuthenticated: localStorage.getItem(\"token\") ? true : false,\n  isLoading: false,\n  isLoadingUser: false,\n  accessToken: localStorage.getItem(\"token\"),\n  // user: null\n}\n/*\n// FUNCTIOND FOR AUTH REDUCER\nconst loading = (state, action) => {\n  return updateObject(state, {\n    isLoading: true\n  });\n}\n\nconst userLoaded = (state, action) => {\n  return updateObject(state, {\n    isAuthenticated: true,\n    isLoading: false,\n    user: action.payload\n  });\n}\n\n*/\n\nconst authSuccess = (state, action) => {\n  //  localStorage.setItem(\"id\", action.payload.user.id); // save user's id\n  const { accessToken } = action.payload;\n  localStorage.setItem(\"token\", accessToken);\n  return updateObject(state, {\n    // user,\n    //accessToken,\n    isAuthenticated: true,\n    isLoading: false\n  });\n}\n\n//HANDLING USER LOADING\nconst userLoaded = (state, action) => {\n  return updateObject(state, {\n    isAuthenticated: true,\n    isLoadingUser: false,\n    user: action.payload\n  });\n}\nconst loading = (state, name) => {\n  return updateObject(state, {\n    [name]: true\n  });\n}\nconst loadingFinished = (state, name) => {\n  return updateObject(state, {\n    [name]: false\n  });\n}\n\nconst authReducer = (state = initState, action) => {\n  switch (action.type) {\n\n    case actionTypes.LOGIN_SUCCESS:\n      return authSuccess(state, action)\n\n    //HANDLING  LOADING START\n    case actionTypes.REGISTER_START:\n    case actionTypes.LOGIN_START:\n    case actionTypes.PASSWORD_CHANGE_START:\n      return loading(state, 'isLoading');\n\n    case actionTypes.USER_LOADING_START:\n      return loading(state, 'isLoadingUser');\n\n    case actionTypes.USER_LOADED:\n      return userLoaded(state, action);\n\n    // HADLING LOADING STOP\n    case actionTypes.REGISTER_SUCCESS:\n    case actionTypes.REGISTER_FAIL:\n    case actionTypes.LOGIN_FAIL:\n    case actionTypes.PASSWORD_CHANGE_SUCCESS:\n    case actionTypes.PASSWORD_CHANGE_FAILED:\n      return loadingFinished(state, 'isLoading')\n\n    case actionTypes.USER_LOADING_FAIL:\n      return loadingFinished(state, 'isLoadingUser');\n\n    //LOGOUT  \n    case actionTypes.LOGOUT_SUCCESS:\n      console.log('signout success');\n      return initState\n\n    // // -----------AUTH---------------//\n\n    // case actionTypes.USER_LOADED:\n    //   return userLoaded(state, action);\n    // case actionTypes.LOGIN_SUCCESS:\n    //   return authSuccess(state, action);\n    // case actionTypes.LOGIN_FAIL:\n    // case actionTypes.LOGOUT_SUCCESS:\n    //   return authFail(state, action);\n    default:\n      return state\n  }\n};\n\nexport default authReducer;\n"]},"metadata":{},"sourceType":"module"}
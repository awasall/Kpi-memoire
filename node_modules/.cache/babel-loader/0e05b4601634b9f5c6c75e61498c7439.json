{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\a851272\\\\OneDrive - Atos\\\\Bureau\\\\KPI-Jira-Front-End-master\\\\src\\\\App\\\\components\\\\Sprints.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Table } from 'antd';\nimport React, { Component } from 'react';\nimport Axios from 'axios';\nimport { tokenConfig, query } from '../utilitity';\nimport config from '../../constants/config';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport columns from './SprintData';\nvar initPageSizeOptions = ['5', '10', '15'];\n\nvar Sprints =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Sprints, _Component);\n\n  function Sprints() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Sprints);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Sprints)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      data: [],\n      pagination: {\n        defaultPageSize: 5,\n        pageSizeOptions: [].concat(initPageSizeOptions),\n        showSizeChanger: true\n      },\n      loading: false,\n      initialPageSizeLength: initPageSizeOptions.length\n    };\n\n    _this.handleTableChange = function (pagination, filters, sorter) {\n      //updating pagination informations\n      var pager = _objectSpread({}, _this.state.pagination);\n\n      pager.current = pagination.current;\n\n      _this.setState({\n        pagination: pager\n      });\n\n      _this.fetch(_objectSpread({\n        pageSize: pagination.pageSize,\n        page: pagination.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order\n      }, filters));\n    };\n\n    _this.fetch = function () {\n      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : undefined;\n\n      // console.log('params:', params);\n      _this.setState({\n        loading: true\n      });\n\n      var theQuery = '';\n\n      if (params) {\n        theQuery = query(params);\n      }\n\n      Axios.get(\"\".concat(config.apiBaseUrl, \"/sprint/board/\").concat(_this.props.boardId, \"/\").concat(theQuery), tokenConfig()).then(function (res) {\n        var payload = res.data;\n\n        var pagination = _objectSpread({}, _this.state.pagination); // Read total count from server\n\n\n        pagination.total = payload.totalElements; // add the total page number to pageSize options\n\n        if (pagination.pageSizeOptions.length === _this.state.initialPageSizeLength) {\n          pagination.pageSizeOptions.push(pagination.total.toString()); // REORDER the numbers\n\n          pagination.pageSizeOptions.sort(function (a, b) {\n            return a - b;\n          });\n        } // Formating the data to be display\n\n\n        var sprintsData = payload.content.map(function (sprint) {\n          var name = sprint.name,\n              startDate = sprint.startDate,\n              endDate = sprint.endDate,\n              dureeSprint = sprint.dureeSprint,\n              dureeEntreDeuxSprint = sprint.dureeEntreDeuxSprint,\n              state = sprint.state,\n              nbIssues = sprint.nbIssues,\n              bugs = sprint.bugs,\n              usEngage = sprint.usEngage,\n              usRealise = sprint.usRealise,\n              stpEngage = sprint.stpEngage,\n              stpRealise = sprint.stpRealise,\n              completude = sprint.completude,\n              acceptanceUs = sprint.acceptanceUs,\n              acceleration = sprint.acceleration,\n              projectName = sprint.projectName;\n          return {\n            \"key\": sprint.id,\n            name: name,\n            startDate: startDate,\n            endDate: endDate,\n            dureeSprint: dureeSprint,\n            dureeEntreDeuxSprint: dureeEntreDeuxSprint,\n            state: state,\n            nbIssues: nbIssues,\n            bugs: bugs,\n            usEngage: usEngage,\n            usRealise: usRealise,\n            stpEngage: stpEngage,\n            stpRealise: stpRealise,\n            completude: completude,\n            acceptanceUs: acceptanceUs,\n            acceleration: acceleration,\n            projectName: projectName\n          };\n        });\n\n        _this.setState({\n          loading: false,\n          data: sprintsData,\n          pagination: pagination\n        }); // SEND DATA TO THE PARENT ELEMENT IN OREDER TO RENDER EXPORT TABLE TO EXCEL FUNCTIONALITY\n\n\n        _this.props.dataSourceExport(sprintsData); //console.log('res', res)\n\n      }).catch(function (err) {\n        console.log('err', err);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(Sprints, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetch();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      if (this.props.boardId !== prevProps.boardId) {\n        this.fetch();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return React.createElement(PerfectScrollbar, {\n        className: \"shadow-1 rounded\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, React.createElement(Table, {\n        columns: columns //rowKey={record => record.registered}\n        ,\n        dataSource: this.state.data,\n        pagination: this.state.pagination,\n        loading: this.state.loading,\n        onChange: this.handleTableChange // locale={\n        //     {\n        //         emptyText: 'Vide'\n        //     }\n        // }\n        // scroll={{ y: 240 }}\n        ,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return Sprints;\n}(Component);\n\nexport default Sprints;","map":{"version":3,"sources":["C:\\Users\\a851272\\OneDrive - Atos\\Bureau\\KPI-Jira-Front-End-master\\src\\App\\components\\Sprints.js"],"names":["Table","React","Component","Axios","tokenConfig","query","config","PerfectScrollbar","columns","initPageSizeOptions","Sprints","state","data","pagination","defaultPageSize","pageSizeOptions","showSizeChanger","loading","initialPageSizeLength","length","handleTableChange","filters","sorter","pager","current","setState","fetch","pageSize","page","sortField","field","sortOrder","order","params","undefined","theQuery","get","apiBaseUrl","props","boardId","then","res","payload","total","totalElements","push","toString","sort","a","b","sprintsData","content","map","sprint","name","startDate","endDate","dureeSprint","dureeEntreDeuxSprint","nbIssues","bugs","usEngage","usRealise","stpEngage","stpRealise","completude","acceptanceUs","acceleration","projectName","id","dataSourceExport","catch","err","console","log","prevProps"],"mappings":"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","sourcesContent":["import { Table } from 'antd';\nimport React, { Component } from 'react'\nimport Axios from 'axios';\nimport { tokenConfig, query } from '../utilitity';\nimport config from '../../constants/config';\nimport PerfectScrollbar from 'react-perfect-scrollbar';\nimport columns from './SprintData';\n\n\nconst initPageSizeOptions = ['5', '10', '15']\nclass Sprints extends Component {\n    state = {\n        data: [],\n        pagination: {\n            defaultPageSize: 5,\n            pageSizeOptions: [...initPageSizeOptions],\n            showSizeChanger: true\n        },\n        loading: false,\n        initialPageSizeLength: initPageSizeOptions.length\n    };\n    handleTableChange = (pagination, filters, sorter) => {\n        //updating pagination informations\n        const pager = { ...this.state.pagination };\n        pager.current = pagination.current;\n        this.setState({\n            pagination: pager,\n        });\n\n        this.fetch({\n            pageSize: pagination.pageSize,\n            page: pagination.current,\n            sortField: sorter.field,\n            sortOrder: sorter.order,\n            ...filters,\n        });\n    }\n    fetch = (params = undefined) => {\n        // console.log('params:', params);\n        this.setState({ loading: true });\n        let theQuery = ''\n        if (params) {\n            theQuery = query(params)\n        }\n        Axios\n            .get(`${config.apiBaseUrl}/sprint/board/${this.props.boardId}/${theQuery}`, tokenConfig())\n            .then(res => {\n                const payload = res.data;\n                const pagination = { ...this.state.pagination };\n                // Read total count from server\n                pagination.total = payload.totalElements;\n                // add the total page number to pageSize options\n                if (pagination.pageSizeOptions.length === this.state.initialPageSizeLength) {\n                    pagination.pageSizeOptions.push(pagination.total.toString())\n                    // REORDER the numbers\n                    pagination.pageSizeOptions.sort((a, b) => a - b);\n                }\n                // Formating the data to be display\n                const sprintsData = payload.content.map(sprint => {\n                    const { name, startDate, endDate,dureeSprint,dureeEntreDeuxSprint, state, nbIssues, bugs, usEngage, usRealise, stpEngage, stpRealise, completude, acceptanceUs, acceleration, projectName } = sprint;\n                    return {\n                        \"key\": sprint.id,\n                        name, startDate, endDate,dureeSprint,dureeEntreDeuxSprint, state, nbIssues, bugs, usEngage, usRealise, stpEngage, stpRealise, completude, acceptanceUs, acceleration, projectName\n                    };\n                })\n                this.setState({\n                    loading: false,\n                    data: sprintsData,\n                    pagination,\n                });\n                // SEND DATA TO THE PARENT ELEMENT IN OREDER TO RENDER EXPORT TABLE TO EXCEL FUNCTIONALITY\n                this.props.dataSourceExport(sprintsData);\n                //console.log('res', res)\n            })\n            .catch(err => {\n                console.log('err', err)\n            });\n\n    }\n    componentDidMount() {\n        this.fetch();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (this.props.boardId !== prevProps.boardId) {\n            this.fetch()\n        }\n    }\n    render() {\n        return (\n            < PerfectScrollbar className=\"shadow-1 rounded\" >\n                <Table columns={columns}\n                    //rowKey={record => record.registered}\n                    dataSource={this.state.data}\n                    pagination={this.state.pagination}\n                    loading={this.state.loading}\n                    onChange={this.handleTableChange}\n                // locale={\n                //     {\n                //         emptyText: 'Vide'\n                //     }\n                // }\n                // scroll={{ y: 240 }}\n                />\n            </PerfectScrollbar >\n\n        );\n    }\n}\n\nexport default Sprints;\n"]},"metadata":{},"sourceType":"module"}